# 简易聊天工具

一个基于 Python socket 和 Tkinter 的局域网聊天工具，支持文字聊天、图片传输、好友管理等功能。

## 功能特点

- 局域网内实时文字聊天
- 图片发送与接收功能，支持弹窗查看原图
- 好友管理系统（添加好友、好友申请与回复）
- 在线用户查询
- 聊天记录本地保存
- 临时会话功能
- 优雅的 UI 界面，支持图片预览

## 实现方法

### 技术栈

- **网络通信**：使用 Python 标准库 `socket` 实现 TCP 协议的客户端/服务端通信
- **界面设计**：采用 `Tkinter` 构建图形用户界面
- **多线程**：使用 `threading` 库处理并发连接和消息接收
- **数据存储**：通过 JSON 格式文件保存好友列表和聊天记录
- **图片处理**：利用 `PIL` 库进行图片缩放和显示

### 核心实现

#### 服务端（server.py）

- 基于 TCP socket 监听客户端连接
- 使用多线程处理多个客户端并发通信
- 维护在线用户列表，负责消息转发
- 支持文字和图片数据的转发处理

#### 客户端（client.py）

- 实现与服务端的连接和通信
- 提供图形用户界面，支持消息输入与显示
- 单独线程处理消息接收，避免 UI 卡顿
- 本地存储好友列表和聊天记录
- 图片处理与显示功能

## 使用方法

### 启动服务端

运行以下命令：
```bash
python server.py
```

### 启动客户端（可多个）

运行以下命令：
```bash
python client.py
```

在客户端界面输入服务端 IP（默认显示本地 IP）和用户名，点击 "连接" 按钮。

### 功能操作

- 输入目标用户名，发送文字消息
- 点击 "查在线" 查看当前在线用户
- 点击 "加好友" 向目标用户发送好友申请
- 点击 "发图片" 选择并发送图片

## 注意事项

- 确保服务端和客户端在同一局域网内
- 服务端默认使用 8888 端口，请确保该端口未被占用
- 接收的图片保存在 `recv_images` 目录下
- 好友列表和聊天记录分别保存在 `friends.json` 和 `chat_records.json` 中

## 项目结构
```
.
├── server.py          # 服务端程序
├── client.py          # 客户端程序
├── friends.json       # 好友列表数据
├── chat_records.json  # 聊天记录数据
└── recv_images/       # 接收的图片保存目录
```